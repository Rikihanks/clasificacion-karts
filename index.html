<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Clasificaci칩n General CK</title>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;800&family=Russo+One&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

 <style>
    :root {
      --bg-color: #0f172a;
      --card-bg: rgba(30, 41, 59, 0.6);
      --text-main: #f1f5f9;
      --accent: #3b82f6;
      --gold: #fbbf24;
      --silver: #94a3b8;
      --bronze: #d97706;
    }

    * { box-sizing: border-box; }

    body {
      font-family: 'Montserrat', sans-serif;
      margin: 0;
      padding: 1rem;
      background-color: var(--bg-color);
      /* FONDO DEL SORTEO DE KARTS */
      background-image: 
        radial-gradient(circle at 10% 20%, rgba(59, 130, 246, 0.15) 0%, transparent 20%),
        radial-gradient(circle at 90% 80%, rgba(239, 68, 68, 0.15) 0%, transparent 20%);
      color: var(--text-main);
      min-height: 100vh;
    }

    /* T칤tulo Brillante (AHORA IGUAL QUE EL SORTEO) */
    h1 {
      font-family: 'Russo One', sans-serif;
      text-align: center;
      font-size: 2.5rem; /* Un poco m치s peque침o que el del sorteo para no ser tan dominante */
      text-transform: uppercase;
      letter-spacing: 2px; /* A침adido para igualar */
      margin-bottom: 2rem;
      
      background: linear-gradient(180deg, #ffffff 20%, #bae6fd 100%);
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
      filter: drop-shadow(0 0 5px rgba(59, 130, 246, 0.6)) 
              drop-shadow(0 4px 4px rgba(0, 0, 0, 0.5)); /* A침adida la sombra m치s profunda */
    }

    .container {
      max-width: 800px;
      margin: 0 auto;
    }

    /* --- PODIO (Top 3) --- */
    .podium {
      display: flex;
      justify-content: center;
      align-items: flex-end;
      gap: 1rem;
      margin-bottom: 3rem;
      padding-top: 1rem;
    }

    .podium-card {
      background: var(--card-bg);
      backdrop-filter: blur(10px);
      border-radius: 16px;
      padding: 1.5rem;
      text-align: center;
      position: relative;
      width: 30%;
      transition: transform 0.3s ease;
      border: 1px solid rgba(255,255,255,0.1);
    }

    /* --- ANIMACI칍N DE PULSO DE NE칍N --- */
    @keyframes glowPulseGold {
      0% { box-shadow: 0 0 15px rgba(251, 191, 36, 0.3), inset 0 0 10px rgba(251, 191, 36, 0.1); border-color: rgba(251, 191, 36, 0.5); }
      100% { box-shadow: 0 0 35px rgba(251, 191, 36, 0.6), inset 0 0 20px rgba(251, 191, 36, 0.2); border-color: rgba(251, 191, 36, 1); }
    }
    @keyframes glowPulseSilver {
      0% { box-shadow: 0 0 15px rgba(148, 163, 184, 0.3); border-color: rgba(148, 163, 184, 0.5); }
      100% { box-shadow: 0 0 30px rgba(148, 163, 184, 0.5); border-color: rgba(148, 163, 184, 1); }
    }
    @keyframes glowPulseBronze {
      0% { box-shadow: 0 0 15px rgba(217, 119, 6, 0.3); border-color: rgba(217, 119, 6, 0.5); }
      100% { box-shadow: 0 0 30px rgba(217, 119, 6, 0.6); border-color: rgba(217, 119, 6, 1); }
    }

    /* 游볞 ORO */
    .rank-1 { 
      order: 2; 
      height: 280px; 
      z-index: 2; 
      transform: scale(1.05); 
      animation: glowPulseGold 2s infinite alternate ease-in-out;
    }

    /* 游볟 PLATA */
    .rank-2 { 
      order: 1; 
      height: 240px; 
      margin-bottom: -10px;
      animation: glowPulseSilver 3s infinite alternate ease-in-out;
    }

    /* 游볠 BRONCE */
    .rank-3 { 
      order: 3; 
      height: 220px; 
      margin-bottom: -20px;
      animation: glowPulseBronze 3s infinite alternate ease-in-out;
    }

    /* Coronas e Iconos */
    .crown {
      font-size: 1.5rem;
      margin-bottom: 0.5rem;
      display: block;
    }
    .rank-1 .crown { color: var(--gold); text-shadow: 0 0 10px var(--gold); font-size: 2rem; }
    .rank-2 .crown { color: var(--silver); text-shadow: 0 0 10px var(--silver); }
    .rank-3 .crown { color: var(--bronze); text-shadow: 0 0 10px var(--bronze); }

    /* Avatar Circular */
    .avatar {
      width: 80px;
      height: 80px;
      border-radius: 50%;
      object-fit: cover;
      border: 3px solid rgba(255,255,255,0.2);
      margin: 0 auto 10px;
      background: #334155;
    }
    .rank-1 .avatar { width: 100px; height: 100px; border-color: var(--gold); }
    .rank-2 .avatar { border-color: var(--silver); }
    .rank-3 .avatar { border-color: var(--bronze); }

    .p-name { font-weight: 800; font-size: 1.1rem; margin-bottom: 4px; }
    .p-team { font-size: 0.8rem; color: #94a3b8; text-transform: uppercase; letter-spacing: 1px; margin-bottom: 1rem; }
    .p-points { 
      font-family: 'Russo One', sans-serif; 
      font-size: 1.8rem; 
      background: rgba(0,0,0,0.3); 
      padding: 5px 10px; 
      border-radius: 8px; 
      display: inline-block;
    }

    /* --- LISTA DEL RESTO (4췈 en adelante) --- */
    .list {
      display: flex;
      flex-direction: column;
      gap: 1rem;
    }

    .list-item {
      display: flex;
      align-items: center;
      background: rgba(15, 23, 42, 0.8);
      border: 1px solid rgba(255,255,255,0.05);
      padding: 1rem;
      border-radius: 12px;
      transition: transform 0.2s;
    }

    .list-item:hover {
      background: rgba(30, 41, 59, 0.9);
      transform: translateX(5px);
      border-color: var(--accent);
    }

    .rank-num {
      font-family: 'Russo One';
      font-size: 1.5rem;
      color: #64748b;
      width: 40px;
      text-align: center;
    }

    .mini-avatar {
      width: 50px;
      height: 50px;
      border-radius: 50%;
      margin: 0 1rem;
      object-fit: cover;
      border: 2px solid #334155;
    }

    .info { flex-grow: 1; }
    .l-name { font-weight: 700; font-size: 1.1rem; }
    .l-team { font-size: 0.85rem; color: #94a3b8; }
    
    .l-points {
      font-family: 'Russo One';
      font-size: 1.4rem;
      color: var(--accent);
    }
    .l-points span { font-size: 0.8rem; color: #64748b; font-family: 'Montserrat'; }

    /* --- RESPONSIVE MOBILE --- */
    @media (max-width: 600px) {
      .podium {
        flex-direction: column;
        align-items: center;
        gap: 1.5rem;
      }
      
      .podium-card {
        width: 100%;
        height: auto !important; 
        order: unset !important; 
        margin-bottom: 0;
        display: flex;
        align-items: center;
        text-align: left;
        padding: 1rem;
      }

      .podium-card .avatar { margin: 0 1rem 0 0; width: 70px; height: 70px; }
      .podium-content { flex: 1; }
      
      .rank-1 { transform: scale(1.02); }
    }
  </style>
</head>
<body>

<div class="container">
  <h1><i class="fa-solid fa-trophy"></i> Clasificaci칩n</h1>

  <div id="podium-container" class="podium"></div>

  <div id="list-container" class="list"></div>

</div>

<script>
// ==========================================
// 丘뙖잺 CONFIGURACI칍N
// ==========================================

// PEGA AQU칈 EL ENLACE "PUBLICAR EN LA WEB" (FORMATO CSV) DE TU GOOGLE SHEET
// Aseg칰rate de que el enlace termina o contiene "output=csv"
// 1. Tu enlace original de Google Sheets (el que me has pasado en el error)
const GOOGLE_CSV_LINK = "https://docs.google.com/spreadsheets/d/e/2PACX-1vTlPsGq-SypD4WPitvnR7JcluA8_6-5ePtuzyf5zFGJ31eppN55iUIHsKo0oduOZ9AVyVTf6VkPvTyu/pub?output=csv";

// 2. USAMOS ESTE ENLACE (Con el proxy para que funcione en local)
const SHEET_URL = `https://api.allorigins.win/raw?url=${encodeURIComponent(GOOGLE_CSV_LINK)}`;
// ==========================================
// 游 L칍GICA DE CARGA DE DATOS
// ==========================================

async function fetchLeaderboardData() {
    const podiumContainer = document.getElementById('podium-container');
    const listContainer = document.getElementById('list-container');
    
    // Mostrar un estado de carga mientras lee el Excel
    listContainer.innerHTML = '<div style="text-align:center; color:#94a3b8;">Cargando datos del campeonato...</div>';

    try {
        const response = await fetch(SHEET_URL);
        const data = await response.text();
        
        // Convertir el texto CSV a un array de objetos utilizable
        const drivers = parseCSV(data);
        
        // Renderizar la web con los datos obtenidos
        renderLeaderboard(drivers);
        
    } catch (error) {
        console.error("Error al cargar el Google Sheet:", error);
        listContainer.innerHTML = '<div style="text-align:center; color:#ef4444;">Error al cargar los datos. Verifica el enlace CSV.</div>';
    }
}

// Funci칩n auxiliar para leer el CSV crudo
function parseCSV(csvText) {
    const lines = csvText.split('\n');
    const drivers = [];
    
    // Empezamos en i=1 para saltarnos la cabecera (Nombre, Equipo, etc.)
    for (let i = 1; i < lines.length; i++) {
        const line = lines[i].trim();
        if (!line) continue; // Saltar l칤neas vac칤as
        
        // Separar por comas
        // IMPORTANTE: El orden en el Excel debe ser: Nombre, Equipo, Puntos, Foto
        const parts = line.split(',');
        
        if (parts.length >= 3) {
            drivers.push({
                name: parts[0].trim(), // Columna A
                team: parts[1].trim(), // Columna B
                points: parseInt(parts[2].trim()) || 0, // Columna C (convertir a numero)
                // Columna D (Foto). Si est치 vac칤a, pone una imagen por defecto
                photo: parts[3] ? parts[3].trim() : "https://www.w3schools.com/howto/img_avatar.png" 
            });
        }
    }
    return drivers;
}

// ==========================================
// 游꿛 RENDERIZADO (IGUAL QUE ANTES)
// ==========================================

function renderLeaderboard(driversData) {
    const podiumContainer = document.getElementById('podium-container');
    const listContainer = document.getElementById('list-container');

    // Limpiar contenedores
    podiumContainer.innerHTML = '';
    listContainer.innerHTML = '';

    // 1. Ordenar pilotos por puntos (Mayor a menor)
    const sortedDrivers = driversData.sort((a, b) => b.points - a.points);

    // 2. Separar Top 3 del resto
    const top3 = sortedDrivers.slice(0, 3);
    const rest = sortedDrivers.slice(3);

    // 3. Renderizar Podio (Top 3)
    let podiumHTML = '';
    
    top3.forEach((driver, index) => {
        const rank = index + 1;
        let crownIcon = '';
        if(rank === 1) crownIcon = '<i class="fa-solid fa-crown crown"></i>';
        if(rank === 2) crownIcon = '<i class="fa-solid fa-medal crown"></i>';
        if(rank === 3) crownIcon = '<i class="fa-solid fa-award crown"></i>';

        podiumHTML += `
            <div class="podium-card rank-${rank}">
                ${crownIcon}
                <img src="${driver.photo}" alt="${driver.name}" class="avatar">
                <div class="podium-content">
                    <div class="p-name">${driver.name}</div>
                    <div class="p-team">${driver.team}</div>
                    <div class="p-points">${driver.points}</div>
                </div>
            </div>
        `;
    });
    podiumContainer.innerHTML = podiumHTML;

    // 4. Renderizar Lista (Resto)
    let listHTML = '';
    
    rest.forEach((driver, index) => {
        const rank = index + 4;
        
        listHTML += `
            <div class="list-item">
                <div class="rank-num">${rank}</div>
                <img src="${driver.photo}" alt="${driver.name}" class="mini-avatar">
                <div class="info">
                    <div class="l-name">${driver.name}</div>
                    <div class="l-team">${driver.team}</div>
                </div>
                <div class="l-points">${driver.points} <span>PTS</span></div>
            </div>
        `;
    });
    listContainer.innerHTML = listHTML;
}

// Iniciar carga al abrir la web
document.addEventListener('DOMContentLoaded', fetchLeaderboardData);
</script>

</body>
</html>
